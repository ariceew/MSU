Связи: [[_Навигатор Ассемблер]]
Теги: #Ассемблер #Теория 
# Регистры

![[Pasted image 20230423072146.png]]

## Набор регистров общего назначения

![[Pasted image 20230423072342.png]]

### Регистр EAX (аккумулятор)
Используется для записи возвращаемого значения функции. Автоматически применяется при операциях умножения, деления и при работе с портами ввода-вывода. Полезен для исполнения арифметических и логических задач (ускоряет их).

### Регистр EBX (регистр базы)
Может содержать адреса элементов оперативной памяти. По умолчанию эти адреса будут представлять собой смещение в сегменте данных

### Регистр ECX (счетчик)
Используется в операциях повторения (циклах, строковых командах и тд)

### Регистр EDX (регистр данных)
Автоматически применяется в операциях умножения и деления (туда записывает остаток). Единственный элемент, который хранит адреса портов ввода-вывода в командах типа IN (получить из порта) и OUT(вывести в порт).

![[Pasted image 20230423072943.png]]

## Индексные регистры
![[Pasted image 20230423073558.png]]
### Регистр ESI (индекс источника)
При выполнении операций со строками в этом регистре содержится смещение строки ИСТОЧНИКА в сегменте данных. Может содержать адреса элементов в оперативной памяти. По умолчанию эти адреса будут представлять собой смещение в сегменте данных.

### Регистр EDI (индекс приемника)
При выполнении операций со строками в этом регистре содержится смещение строки ПРИЕМНИКА в сегменте данных. Может содержать адреса элементов в оперативной памяти. По умолчанию эти адреса будут представлять собой смещение в сегменте данных.

## Регистры для работы со [[Stack (стек) | стеком]] 

![[Pasted image 20230423073630.png]]

### Регистр EBP (указатель базы)

^1b2f74

Может хранить текущий элемент стека (базу) а также может содержать адреса элементов оперативной памяти

### Регистр ESP (указатель стека)

^bf5399

Используется для записи данных в стек и чтения их из стека. 

Фактически он содержит смещение в сегменте стека, которое определяет нужное слово памяти. Значения этого регистра автоматически меняются командами для работы со стеком типов push, pop, pushf, popf, call, ret.

## Регистр признаков EFLAGS
Включает биты, каждый из которых устанавливается в единичное или в нулевое состояние при определенных условиях 
![[Pasted image 20230423074509.png]]

| № Бита | Обозначение | Название              | Описание                                 | Тип Флага |
| ------ | ----------- | --------------------- | ---------------------------------------- | --------- |
| 0      | CF          | Carry Flag            | Флаг переноса                            | Состояние |
| 1      | 1           | -                     | Зарезервирован                           | -         |
| 2      | PF          | Parity Flag           | Флаг четности                            | Состояние |
| 3      | 0           | -                     | Зарезервирован                           | -         |
| 4      | AF          | Auxiliary Carry Flag  | Вспомогательный флаг переноса            | Состояние |
| 5      | 0           | -                     | Зарезервирован                           | -         |
| 6      | ZF          | Zero Flag             | Флаг нуля                                | Состояние |
| 7      | SF          | Sign Flag             | Флаг знака                               | Состояние |
| 8      | TF          | Trap Flag             | Флаг тррассировки                        | Системный |
| 9      | IF          | Interrupt Enable Flag | Флаг разрешения прерываний               | Системный |
| 11     | OF          | Overflow Flag         | Флаг переполнения                        | Состояние |
| 16     | RF          | Resume Flag           | Флаг возобновления                       | Системный |
| 17     | VM          | Virtual-8086 Mode     | Режим виртуального процессора 8086       | Системный |
| 21     | ID          | ID Flag               | Проверка на доступность инструкции CPUID | Системный


### Флаги состояния

**Флаг переноса CF**
устанавливается в 1 при переносе из старшего значащего бита в старший значащий бит и показывает наличие переполнения в беззнаковой целочисленной арифметике. Также используется в длинной арифметике. ^37bced

**Флаг чётности PF**
устанавливается в 1, если младший значащий байт результата содержит чётное число единичных битов. Инструкции для проверки флага чётности облегчала проверку целостности данных. ^79fa1d

**Вспомогательный флаг переноса AF**
устанавливается в 1, если арифметическая операция генерирует перенос из 3 бита в 4. Этот флаг ориентирован на использование в двоично-десятичной (binary coded decimal, BCD) арифметике.

**Флаг нуля ZF** 
устанавливается в 1, если результат равен нулю.   ^93566e

**Флаг знака SF**
равен значению старшего значащего бита результата, который является знаковым битом в знаковой арифметике. ^02b7ef

**Флаг переполнения OF**
устанавливается в 1, если целочисленный результат слишком длинный для размещения в целевом операнде. Флаг показывает наличие переполнения в знаковой целочисленной арифметике и указывает на потерю старшего бита результата. ^6d4f7b

**Флаг направления DF** 
управляет строковыми инструкциями (MOVS, CMPS, SCAS, LODS и STOS) – установка флага заставляет уменьшать адреса (обрабатывать строки от старших адресов к младшим), обнуление заставляет увеличивать адреса. Инструкции STD и CLD соответственно устанавливают и сбрасывают флаг DF.

