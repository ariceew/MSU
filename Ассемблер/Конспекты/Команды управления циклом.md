Связи: [[_Навигатор Ассемблер]]
Теги: #Ассемблер #Теория 

# Содержание:
- [[#Команда Loop]]
- [[#Команды loope / loopz]]
- [[#Команда loopne / loopnz]]
# Команда Loop

Данные команды являются командами короткого перехода. Это значит, если между началом цикла и командой типа loop будет слишком много строчек, команда попросту не выполнится. Также стоит учитывать что один макрос это не одна строчка, а их совокупность. Поэтому если в цикле много команд вызовов макросов, есть большая вероятность ошибки на этапе компиляции.

Алгоритм работы:
1. уменьшение значения регистра ecx/cx на 1
2. сравнение регистра ecx/cx с нулем
	Если ecx/cx = 0, то выходим из цикла, то есть управление передается на следующую после loop команду, иначе - управление передается на метку перехода (цикл повторяется)
Команда Loop реализует цикл с **постусловием**.

Схема реализации выглядит так:

```
mov cx, N ; сколько раз хотим чтобы цикл повторялся
jcxz Exit ; перестраховываемся
CYCL:
...
<тело цикла>
...
loop CYCL ; зацикливаем
Exit: ; метка выхода
...
```

# Команды loope / loopz
Абсолютные синонимы, только теперь проверяется и Zero Flag

полезно, когда мы ищем какое-то число в последовательности, которое не равно заданному.

```
loope <метка перехода>
loopz <метка перехода>
```

При использовании этих команд цикл повторяется до тех пор, пока cx $\ne$ 0 и zf = 1. Выход из цикла осуществляется при выполнении одного из двух условий: cx = 0 или zf = 0

Работа команд заключается в выполнении следующих действий:  
1) уменьшение значения регистра ecx/cx на 1;  
2) сравнение регистра ecx/cx с нулем: если (ecx/cx) = 0, то выход из цикла; 
3) анализ состояния флага нуля zf: если zf = 0, выходим из цикла.  
Таким образом, цикл повторяется, если cx ≠ 0 и zf = 1.

Пример:

```
mov cx, N
jcxz Exit
CYCL:
<body>
cmp <оп1>, <оп2>
loope CYCL
Exit:
...
```

Так как флаг нуля принимает значение 0 в случае несовпадения операндов и, соответственно, выход из цикла осуществляется именно при несовпадении операндов, команды loope/loopz удобно использовать для поиска первого элемента последовательности, отличного от заданной величины.

# Команда loopne / loopnz

Когда хотим найти какой-то элемент, который равен какому-то заданному.

Синтаксис команд:

```
loopne <метка перехода>
loopnz <метка перехода>
```

При использовании этих команд цикл повторяется до тех пор, пока cx $\ne$ 0 и zf = 0

Выход из цикла осуществляется при выполнении одного из двух условий
cx = 0 или zf = 1

Работа команд заключается в выполнении следующих действий:

 1)  уменьшение значения регистра ecx/cx на 1;
 2)  сравнение регистра ecx/cx с нулем: если ( ecx/cx ) = 0, то выход из цикла;
3)  анализ состояния флага нуля zf : если zf = 1, то выход из цикла.
Таким образом, цикл повторяется, если cx ≠ 0 и zf = 0.

Пример организации цикла:


```
mov cx, N
jcxz Exit
CYCL:
<body>
cmp <оп1>, <оп2>
loope CYCL
Exit:
...
```

Так как флаг нуля принимает значение 1 в случае совпадения операндов и, соответственно, выход из цикла осуществляется именно при совпадении операндов, команды loopne/loopnz удобно использовать для поиска первого элемента последовательности, имеющего заданную величину.