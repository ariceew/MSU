Связи: [[_Навигатор Ассемблер]]
Теги: #Ассемблер 

## Режимы адресации
Три основных режима:

1. [[#Регистровая адресация]]
2. [[#Непосредственная адресация]] 
3. память: 
	1. [[#Прямой режим адресации]] 
	2. [[#Косвенный режим адресации]]

### Ограничения:
- Одинаковая длинна
- Не могут одновременно быть памятью
- Получатель не может быть CS, IP, EIP
- Нельзя пересылать в сегментный [[Регистры | регистр]] пересылать непосредственное значение
- Приемником не может быть непосредственный режим адресации

### Регистровая адресация
Пример регистровой адресации: ^0c3d9f

```
add EAX, EBX ; eах = eax + ebх
dec ESI   ; esi = esi - 1
mov EAX, EBX ; eах = ebх
```

> Обработка данных между регистрами не требует памяти, поэтому она обеспечивает самую быструю обработку данных.

### Непосредственная адресация
Первый операнд может быть регистром или ячейкой памяти, а второй константой. Первый операнд определяет длинну данных

```
BYTE_VALUE DB 150 ; определяет значение типа byte
WORD_VALUE DW 300 ; определение значения типа word
ADD BYTE_VALUE, 65 ; добавлен непосредственный операнд 65
MOV AX, 45H; непосредственная константа 45H перемещена в AX
```

### Прямой режим адресации
Один из операндом ссылается на ячейку памяти, а другой - на регистр. Является самым медленным.

```
MOV EAX, SUM ; eax = sum
```

Ассемблер заменяет SUM на соотвествующий адрес, хранящийся в сегменте данных (по умолчанию в регистре DS) и значение, хранящееся по адресу sum, помещает в регистр EAX.

### Косвенный режим адресации

Косвенная адресация в свою очередь имеет следующие виды:
-   [[#Косвенная базовая (регистровая) адресация]];
-   [[#Косвенная базовая (регистровая) адресация со смещением]];
-   [[#Косвенная индексная адресация]];
-   [[#Косвенная базовая индексная адресация]];

#### Косвенная базовая (регистровая) адресация

Эффективный аддрес операнда может находится в любом из регистров общего назначения, кроме `SP//ESP` и `BP//EBP` ([[Регистры#Регистры для работы со Stack (стек) стеком |регистры для работы со стеком]])
Пример:

```
a db 25
mov ESI, a
mov eax, [esi]; eax = значение по адресу esi
```

#### Косвенная базовая (регистровая) адресация со смещением
Доступ к данным с известным смещением относительно базового адреса. Используется для доступа к элементам структур, массивов (когда смещение известно заранее), а начальный адрес вычисляется динамически. 

Пример:


```
array db 1,2,3,4,5
mov esi array
mov eax, [esi+2] ; eax = *(esi+2)
```

#### Косвенная индексная адресация
Используется один из регистров общего назначения, но обладает возможностью масштабирования содержимого индексного регистра.


```
mov eax, mas[ESI * 4] ; смещение относительно начала сегмента данных
```

#### Косвенная базовая индексная адресация
Эффективный адрес формируется как сумма содержимого двух регистров общего назначения: базового и индексного. В качестве таких регистров могут применяться любые регистры общего назначения

Пример:


```
mov esi, 0
lea ebx, arr ; lea - вычисляет эффективный аддрес источника и помещает его в приемник
; lea приемник, источник
mov eax, [ebx][esi]
```
Эффективный адрес второго операнда формируется как esi+edx. 
Значение по этому адресу помещается в регистр eax. 